# PHP Framework

ะัะพััะพะน ััะตะนะผะฒะพัะบ, ะฑัะบะฒะฐะปัะฝะพ ะฟะพััะธ ัะฐะผัะน ะฟัะพััะพะน ะฒ ะผะธัะต.
ะะฐ ะพัะฝะพะฒั ะฑัะปะฐ ะฒะทััะฐ *ะบะพะฝัะตะฟัะธั* ััะตะนะผะฒะพัะบะฐ [yii2](https://github.com/yiisoft/yii2-app-advanced). 
ะะฐะฟะธัะฐะฝ ั ะฝัะปั, ัะฒะพะธะผะธ ัะธะปะฐะผั, ะดะปั ะดะตะผะพะฝัััะฐัะธะธ ัะฒะพะตะณะพ codeStyle, ะธัะฟะพะปัะทัะตะผัั ะบะพะฝัะตะฟัะธะน, ะฟะฐััะตัะฝะพะฒ ะธ ั.ะฟ. 
*( ะฟะพััะฐะฒะธะป ะฟะตัะด ัะพะฑะพะน ะทะฐะดะฐัั: ะฝะฐะฟะธัะฐัั ััะตะนะผะฒะพัะบ ัะฒะพะธะผะธ ัะธะปะฐะผะธ - ััะพ ะถะต ะฒัะตะณะดะฐ ะธะฝัะตัะตัะฝะพ )*
  
**ัะพะผะฝะธัะตะปัะฝัะต ะฟัะตะธะผััะตััะฒะฐ ะฟัะพะตะบัะฐ :)**  
- ะพััััััะฒะธะต ะทะฐะฒะธัะธะผะพััะตะน
- ะบะพะฝัะตะฟััะฐะปัะฝะพ ะฟะพัะพะถ ะฝะฐ Yii2
- ะผะฐะปะพ ะฒะตัะธั
- ะฟัะพััะพัะฐ



## ะะตัะฐััะธั ะฟัะธะปะพะถะตะฝะธั 
 
ะัะพะตะบั ะฒ ะฑะพะปััะตะน ััะตะฟะตะฝะธ ะฟะพะดัะฐะถะฐะตั ััััะบัััะต yii2, ะฝะพ ะฝะต ะฟะพะปะฝะพัััั.
```
  ๐ app
  โโโ ๐ _                       # ัะดัะพ ะฟัะพะตะบัะฐ
  โโโ ๐ config                  # ะะธััะตะบัะพัะธั ั ะฝะฐัััะพะนะบะฐะผะธ ะฟัะธะปะพะถะตะฝะธั
  โ   โโโ ๐ setups              # ะะธััะตะบัะพัะธั ั ะฝะฐัััะพะนะบะฐะผะธ ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ัะพััะฐ ( HOST_NAME )
  โ   โ   โโโ ๐ localhost.php   # ะัะธะฒะฐัะฝัะต ะฝะฐัััะพะนะบะธ ั ัะตะบะฒะธะทะธัะฐะผะธ ะดะปั ะฟะพะดะบะปััะตะฝะธะน (ะัะธะผะตั: HOST_NAME localhost )
  โ   โโโ ๐ params.php          # ะะฐัััะพะนะบะธ ะบะพะผะฟะพะฝะตะฝัะพะฒ
  โ   โโโ ๐ routes.php          # ะะฐัััะพะนะบะฐ ะผะฐัััััะพะฒ
  โโโ ๐ controllers             # ะะพะฝััะพะปะปะตัั ะฒะฐัะตะณะพ ะฟัะธะปะพะถะตะฝะธั
  โ   โโโ ๐ SiteController.php  #    ะัะธะผะตั: ะะพะฝััะพะปะปะตั Site
  โโโ ๐ models                  # ะัะฟะพะปัะทัะตะผัะต ะผะพะดะตะปัะบะธ ะฟัะพะตะบัะฐ 
  โ   โโโ ๐ source              #    ะััะพะดะฝัะต ัะฐะนะปั ะผะพะดะตะปะตะบ
  โโโ ๐ satic                   # ะกัะฐัะธะบะฐ ะฟัะพะตะบัะฐ
  โ   โโโ ๐ css                 #    ะกัะธะปะธ
  โ   โโโ ๐ docs                #    ะะพะบัะผะตะฝัั
  โ   โโโ ๐ fonts               #    ะจัะธััั
  โ   โโโ ๐ img                 #    ะะฐััะธะฝะบะธ
  โ   โโโ ๐ js                  #    js
  โโโ ๐ views                   # ะัััะธ/ะัะตะดััะฐะฒะปะตะฝะธั
      โโโ ๐ layouts             #    ะะธััะตะบัะพัะธั ะดะปั ะพะฑัััะพะบ ะฒััั
      โโโ ๐ site                #    ัะฐะฑะปะพะฝั ะดะปั ะบะพะฝััะพะปะปะตัะฐ `site`
```



#### ะะตัะฐััะธั ัะดัะฐ
  
ะดะปั ัะตั ะบัะพ ะฒ ัะตะผะต ะธ ะบะพะผั ะธะฝัะตัะตัะฝะพ ััะพ ั ััะตะนะผะฒะพัะบะฐ ~~ะฟะพะด ะปะธััะธะบะพะผ~~ ะฟะพะด ะบะฐะฟะพัะพะผ.
```
  ๐ _
  โโโ ๐ base                    # ะะฐะทะพะฒัะต ะบะปะฐัั ะดะปั ะฝะฐัะปะตะดะพะฒะฐะฝะธะน
  โ   โโโ ๐ prototype           #     ะดะธััะตะบะพัะธั ัะพะดะตัะถะฐัะฐั traits 
  โโโ ๐ components              # ะดะธััะธะบัะพัะธั ั ะฐะทะพะฒัะผะธ ะบะพะผะฟะพะฝะตะฝัะฐะผะธ ััะตะนะผะฒะพัะบะฐ
  โ   โโโ ๐ main                #     ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั App() 
  โโโ ๐ guide                   # ะดะธััะธะบัะพัะธั ั ะณะฐะนะดะฐะผะธ
  โ   โโโ ๐ en                  #     ะณะฐะนะด ะฝะฐ ะะฝะณะปะธะนัะบะพะฒ
  โ   โโโ ๐ ru                  #     ะณะฐะนะด ะฝะฐ ะัััะบะพะผ
  โโโ ๐ helpers                 # ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะต ะบะพะผะฟะพะฝะตะฝัั
  โโโ ๐ runtime                 # ัะฐะนะปั ะณะตะฝะตัะธััะตะผัะต ััะตะนะผะพัะบะพะผ
  โ   โโโ ๐ cache               #     ะบะตั
  โ   โโโ ๐ logs                #     ะปะพะณะธ
  โโโ ๐ setups                  # ะฝะฐัััะพะนะบะธ ััะตะนะผะฒะพัะบะฐ
  โ   โโโ ๐ autoload.php        #     ะฝะฐัััะพะนะบะฐ ะฐะฒัะพะทะฐะณััะทะบะธ ะบะปะฐััะพะฒ
  โ   โโโ ๐ const.php           #     ะกะฟะธัะพะบ ะบะพะฝััะฐะฝั
  โโโ ๐ templates               # ัะฐะฑะปะพะฝั ะพัะธะฑะพะบ
      โโโ ๐ generator           #     ะณะตะฝะตัะธััะตะผัะต ัะฐะฑะปะพะฝั
      โโโ ๐ errors              #     ัััะฐะฝะธัั ะพัะธะฑะพะบ 403/404/500/502/504/502
```



### ะฃััะฐะฝะพะฒะบะฐ

ะัะฟะพะปัะทัั ะบะพะฝัะพะปั ะฒ ัะฒัะทะบะต ั ะบะพะผะฐะฝะดะพะน `cd` ะฟัะพะฝะธะบะฐะตัะต ะฒ ะดะธััะตะบัะพัะธั ั ะฑัะดัััะธะผ ะฟัะพะตะบัะพะผ ะธ ะธัะฟะพะปัะทัะตัะต ะบะพะผะฐะฝะดั

`git clone https://github.com/andy87/php-framework .`



#### Apache 
 
ะัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ web-ัะตัะฒะตัะฐ `Apache`   
ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ ััะตะฑัะตััั ะฝะฐะปะธัะธะต ัะฐะนะปะฐ `.htaccess` ั ะผะธะฝะธะผะฐะปัะฝัะผ ัะพะดะตัะถะธะผัะผ:
```
<IfModule mod_autoindex.c>
   Options -Indexes
</IfModule>

<IfModule mod_rewrite.c>

   Options +FollowSymlinks
   RewriteEngine On

   RewriteCond %{REQUEST_URI}      ^/(js|css|img|docs|fonts|static)
   RewriteRule ^js/(.*)$            app/static/js/$1       [L]
   RewriteRule ^css/(.*)$           app/static/css/$1      [L]
   RewriteRule ^img/(.*)$           app/static/img/$1      [L]
   RewriteRule ^docs/(.*)$          app/static/docs/$1     [L]
   RewriteRule ^fonts/(.*)$         app/static/fonts/$1    [L]
   RewriteRule ^static/(.*)$        app/static/$1    [L]

   RewriteCond %{REQUEST_URI}       !^/app/static/
   RewriteCond %{REQUEST_FILENAME}  !favicon.ico

   RewriteCond %{REQUEST_FILENAME}  !-f [OR]
   RewriteCond %{REQUEST_FILENAME}  !-d

   RewriteRule ^(.*)$               app/$1

</IfModule>

# ะัะธ ะถะตะปะฐะฝะธะธ
ErrorDocument 404 /app/_/templates/errors/404.php
# ... 403/500/502/504/508
```



#### Nginx  

ะัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ web-ัะตัะฒะตัะฐ `Nginx`  
ะผะธะฝะธะผะฐะปัะฝัะต ะฝะฐัััะพะนะบะธ:
```
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    
    server_name mysite.local; #ะธะผั ะฒะฐัะตะณะพ ะดะพะผะตะฝะฐ
    root        /app;

    index       index.php;
    
    access_log  /app/_/runtime/logs/access.log;
    error_log   /app/_/runtime/logs/error.log;
    
    location / {
        # Redirect everything that isn't a real file to index.php
        try_files $uri $uri/ /index.php$is_args$args;
    }
    
    # ะัะธ ะถะตะปะฐะฝะธะธ
    #error_page 404 /app/_/templates/errors/404.php;
    # ... 403/500/502/504/508
    
    # deny accessing php files for the /assets directory
    location ~ ^/(static|js|css|img|docs|fonts)/.*\.php$ {
        deny all;
    }
   
    location ~ \.php$ {
       include snippets/fastcgi-php.conf;
       fastcgi_pass unix:/run/php/php7.2-fpm.sock;
    }
}   
```



### ะะฝัััะตะฝะธะต ะทะฐะฒะธัะธะผะพััะธ ะธ ะฝะฐัััะพะนะบะฐ ััะตะผะฒะพัะบะฐ

- Namespace'ั ะฝะฐัะธะฝะฐัััั ั `_` (ะฝะธะถะฝะตะณะพ ะฟะพะดัััะบะธะฒะฐะฝะธั)  
- ะัั "ะผััะพ" ััะตะนะผะฒะพัะบะฐ ะปะตะถะธั ะฒ ะดะธััะตะบัะพัะธะธ `app`  
- ะฟัะฐะฒะธะปะฐ ัะพััะธะฝะณะฐ ะฝะฐัััะฐะนะฒะฐัััั ะฒ `app/config/routes.php`
- ะบะพะฝััะพะปะปะตัั/ัะบัะพะฝั ะฒ `routes.php` ัะบะฐะทัะฒะฐัััั ะฒ `lowercase`, ะฟัะธ ะธะผะตะฝะธ `CamelCase` ัะตัะตะท ัะธัะต  
**ะัะธะผะตั:** ัะพัั `uri => main-server/restart-now` ะฒัะทะพะฒะธั ะบะพะฝััะพะปะปะตั `MainServerController` ัะบัะพะฝ `actionRestartNow` 
- ะะฐัััะพะนะบะธ ะฟะพะดะบะปััะตะฝะธั ะดะปั ะดะพะผะตะฝะฐ ะฝะฐัััะฐะนะฒะฐัััั ะฒ `app/config/setups/ {HOST_NAME} .php`    
- Models ะฝะฐััะปะตะดัะตััั ะพั `BaseModels`  
- Controller ะฝะฐััะปะตะดัะตััั ะพั `BaseController`  
- ะะผะตะฝะฐ Controller'ะพะฒ ะธะผะตัั ัััะธะบั `Controller`  
**ะัะธะผะตั:** ะบะพะฝััะพะปะปะตั `Main` ะธะผะตะตั ะธะผั ัะฐะนะปะฐ ะบะปะฐััะฐ `MainController`  
- ะะผะตะฝะฐ Action'ะพะฒ ะธะผะตัั ะฟัะตัะธะบั `action`  
**ะัะธะผะตั:** ัะบัะพะฝ `Login` ะธะผะตะตั ะธะผั ะผะตัะพะดะฐ `actionLogin`  
- ัะบัะพะฝ ะดะพะปะถะตะฝ ะฒะตัะฝััั  
-- ะดะปั ะฒัะฒะพะดะฐ **HTML** - ัะตะทัะปััะฐั **render()**  
-- ะดะปั ะฒัะฒะพะดะฐ **JSON** - ะฒะพะทะฒัะฐัะฐัั **renderJson()** ะปะธะฑะพ **return array**  


### ะะตะฝะตัะฐัะธั ัะฐะนะปะพะฒ
ะะท ะบะพะฝัะพะปะธ ะธัะฟะพะปัะทัั `cd` ะฝะฐะฟัะฐะฒะปัะตะผัั ะฒ ะดะธััะตะบัะพัะธั `app` ะฒ ะฝะตะน ะธัะฟะพะปัะทัะตะผ ะดะปั ะณะตะฝะตัะฐัะธะธ ัะฐะปะนะพะฒ, ัะปะตะดัััะธะต ะบะพะผะฐะฝะดั: 

##### ะะตะฝะตัะฐัะธั ะบะพะฝััะพะปะปะตัะฐ  
`_ create/controller Profile` 
 
##### ะะตะฝะตัะฐัะธั ะฟัะตะดััะฐะฒะปะตะฝะธั/ัะฐะฑะปะพะฝะฐ  
`_ create/view landing main` 

##### ะะตะฝะตัะฐัะธั ะผะพะดะตะปะธ  
`_ create/model Access`  
 
##### ะะตะฝะตัะฐัะธั ะผะพะดัะปั  
`_ create/module Test`  

### ะะพะณะธะบะฐ ะฟัะธะปะพะถะตะฝะธั

ะะฐะฟัะพั ะฟะพะฟะฐะดะฐะตั ะฒ ัะพัะบั ะฒัะพะดะฐ `index.php`  
ะกะพะทะดะฐััั ัะบะทะตะผะฟะปัั ะบะปะฐััะฐ [App()](/app/_/guide/ru/App.md)  
ะฃััะฐะฝะฐะฒะปะธะฒะฐัััั ะฒัะต ัะฒะพะนััะฒะฐ [App()](/app/_/guide/ru/App.md)  
ะ ัะบะทะตะผะฟะปััะต ะบะปะฐััะฐ [Route()](/app/_/guide/ru/Route.md)   
- ะัะตััั ะฟะพะดัะพะดััะตะต ะฟัะฐะฒะธะปะพ ะฒ [Route](/app/_/guide/ru/Route.md)::[$rules](/app/_/guide/ru/Route.md#param__rules)  
- ะะท ะฟะพะดัะทะพะดััะตะณะพ ะฟัะฐะฒะธะปะฐ ะะฐะดะฐัััั ID ะดะปั:    
- [Route](/app/_/guide/ru/Route.md)::[$controller](/app/_/guide/ru/Route.md#param__controller)  
- [Route](/app/_/guide/ru/Route.md)::[$action](/app/_/guide/ru/Route.md#param__action)  

ะกะพะทะดะฐัั ัะบะทะตะผะฟะปัั ะบะปะฐััะฐ [Controller()](/app/_/guide/ru/Controller.md)  
- ัััะฐะฝะฐะฒะปะธะฒะฐะตััั ัะฒะพะนััะฒะพ [$id](/app/_/guide/ru/Controller.md#params_id)  
- ัััะฐะฝะฐะฒะปะธะฒะฐะตััั ัะฒะพะนััะฒะพ [$target](/app/_/guide/ru/Controller.md#params_target)  
- ัะพะทะดะฐัั ัะบะทะตะผะฟะปัั ะบะปะฐััะฐ [Action()](/app/_/guide/ru/Action.md)  
- ัััะฐะฝะฐะฒะปะธะฒะฐะตััั ัะฒะพะนััะฒะพ [$id](/app/_/guide/ru/Action.md#params_id)  
- ัััะฐะฝะฐะฒะปะธะฒะฐะตััั ัะฒะพะนััะฒะพ [$target](/app/_/guide/ru/Action.md#params_target)  

ะกะพะทะดะฐัััั ัะบะทะตะผะฟะปัั ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะบะพะฝััะพะปะปะตัะฐ ะฟะพ ะธะผะตะฝะธ [Controller](/app/_/guide/ru/Controller.md)::[$target](/app/_/guide/ru/Controller.md#params_target). 
ะดะฐะปะตะต ั ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะบะพะฝััะพะปะปะตัะฐ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ ะฒัะทัะฒะฐะตััั ะผะตัะพะดั:  
ั ะบะพะฝััะพะปะปะตัะฐ [Controller](/app/_/guide/ru/Controller.md)::[$target](/app/_/guide/ru/Controller.md#params_target) ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ ะฒัะทัะฒะฐะตััั ะผะตัะพะดั:  
- [init()](/app/_/guide/ru/Controller.md#method_init)   
- [rules()](/app/_/guide/ru/Controller.md#method_rules)   
- [beforeAction()](/app/_/guide/ru/Controller.md#method_beforeAction)  
- `$controller->{Action()->target}()`  
- [afterAction()](/app/_/guide/ru/Controller.md#method_beforeAction)  
- [App](/app/_/guide/ru/App.md)::[display()](/app/_/guide/ru/App.md#method_display)   - ะพัะดะฐัั ะพัะฒะตั ( text/json/link)
 ะธััะพะดั ะธะท ัะพัะผะฐัะฐ ะพัะฒะตัะฐ ( 
[App](/app/_/guide/ru/App.md)::[$response](/app/_/guide/ru/Response.md)->[format](/app/_/guide/ru/Response.md#params_format))  
 
 ะกะพะฒะตััะฐะตั ะดะตะนััะฒะธะต:
 * ะฒ ะฑัะฐัะทะตั ะพัะดะฐัััั ัะตะบัั
 * ัะพะฒะตััะฐะตั ัะตะดะธัะตะบั



## ะขัะตะฑะพะฒะฐะฝะธั

- php5.2 *ะธะปะธ ะฒััะต*
- MySQL 5.5 *ะธะปะธ ะฒััะต*

*framework ะฒ ะฟัะพัะตััะต ัะฐะทัะฐะฑะพัะบะธ...*